# Module 4: Memory Management

## 1. Basics

- **Logical Address (Virtual Address):** Generated by the CPU.
- **Physical Address:** Address seen by the memory unit.
- **MMU (Memory Management Unit):** Hardware device that maps virtual to physical address at run time.

## 2. Fragmentation

- **Internal Fragmentation:** Allocated memory may be slightly larger than requested memory; this size difference is memory internal to a partition, but not being used.
- **External Fragmentation:** Total memory space exists to satisfy a request, but it is not contiguous.

## 3. Paging

- Physical memory is divided into fixed-sized blocks called **Frames**.
- Logical memory is divided into blocks of the same size called **Pages**.
- **Page Table:** Contains base address of each page in physical memory.
- **TLB (Translation Look-aside Buffer):** A cache used to speed up virtual-to-physical address translation.
- **Solves:** External Fragmentation.

## 4. Segmentation

- Memory-management scheme that supports user view of memory.
- A program is a collection of segments (e.g., main program, procedure, function, method, stack, symbol table).
- Logical address: `<segment-number, offset>`.

## 5. Virtual Memory

- Separation of user logical memory from physical memory.
- Allows execution of processes that are not completely in memory.
- Allows address spaces to be shared by several processes.

### Demand Paging

- Bring a page into memory only when it is needed.
- **Page Fault:** Access to a page not currently in memory.

### Page Replacement Algorithms

When a page fault occurs and memory is full, we need to replace a page.

#### a. FIFO (First-In, First-Out)

- Replace the oldest page.
- **Belady's Anomaly:** More frames $\nRightarrow$ fewer page faults.

#### b. Optimal Page Replacement

- Replace the page that will not be used for the longest period of time.
- Impossible to implement (requires future knowledge), used as a benchmark.

#### c. LRU (Least Recently Used)

- Replace the page that has not been used for the longest period of time.
- Good approximation of Optimal.

## 6. Thrashing

- A process is thrashing if it is spending more time paging than executing.
- Occurs when a process does not have enough frames to support the pages in active use.
- Causes CPU utilization to drop drastically.
